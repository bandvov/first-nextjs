{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport { Button, TextField } from '@material-ui/core';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { Image } from '@material-ui/icons';\nimport { useContext } from 'react';\nimport Router from 'next/router';\nimport Link from 'next/link';\nimport { useStyles } from './car-form.styles';\nimport { carValidationMessages } from '../../configs/validation';\nimport { carRegExp } from '../../configs/regexpSchemas';\nimport { colors, years, categories } from '../../configs';\nimport { MainContext } from '../../context/mainContext';\nimport { addCar, updateCar } from '../../operations/car-operations';\nvar MIN_LENGTH_MESSAGE = carValidationMessages.MIN_LENGTH_MESSAGE,\n    MAX_LENGTH_MESSAGE = carValidationMessages.MAX_LENGTH_MESSAGE,\n    VALIDATION_ERROR = carValidationMessages.VALIDATION_ERROR,\n    PRICE_VALIDATION_ERROR = carValidationMessages.PRICE_VALIDATION_ERROR;\nexport function CarForm(_ref) {\n  var _ref$edit = _ref.edit,\n      edit = _ref$edit === void 0 ? false : _ref$edit,\n      _ref$car = _ref.car,\n      car = _ref$car === void 0 ? {} : _ref$car;\n  var classes = useStyles();\n\n  var _useContext = useContext(MainContext),\n      send = _useContext.send;\n\n  var addCarhandler = function addCarhandler(car) {\n    send({\n      type: 'SHOW',\n      text: 'Are you sure you want to add the car?',\n      handler: function handler() {\n        return addCar(car);\n      },\n      push: function push() {\n        return Router.push('/');\n      }\n    });\n  };\n\n  var updateCarhandler = function updateCarhandler(data) {\n    send({\n      type: 'SHOW',\n      text: 'Are you sure you want to update the car data?',\n      handler: function handler() {\n        return updateCar(data);\n      },\n      push: function push() {\n        return Router.push('/');\n      }\n    });\n  };\n\n  var mappedColors = colors.map(function (color) {\n    return /*#__PURE__*/_jsx(\"option\", {\n      children: color\n    }, color);\n  });\n  var mappedYears = years.map(function (year) {\n    return /*#__PURE__*/_jsx(\"option\", {\n      children: year\n    }, year);\n  });\n  var mappedCategories = categories.map(function (category) {\n    return /*#__PURE__*/_jsx(\"option\", {\n      children: category\n    }, category);\n  });\n  var formSchema = Yup.object().shape({\n    brand: Yup.string().min(2, MIN_LENGTH_MESSAGE).max(100, MAX_LENGTH_MESSAGE).required(VALIDATION_ERROR),\n    model: Yup.string().min(2, MIN_LENGTH_MESSAGE).max(100, MAX_LENGTH_MESSAGE).required(VALIDATION_ERROR),\n    year: Yup.string().matches(carRegExp.onlyPositiveDigits, PRICE_VALIDATION_ERROR).required(VALIDATION_ERROR),\n    engine: Yup.string().min(2, MIN_LENGTH_MESSAGE).max(100, MAX_LENGTH_MESSAGE).required(VALIDATION_ERROR),\n    transmission: Yup.string().min(2, MIN_LENGTH_MESSAGE).max(100, MAX_LENGTH_MESSAGE).required(VALIDATION_ERROR),\n    mileage: Yup.string().matches(carRegExp.onlyPositiveDigits, PRICE_VALIDATION_ERROR).required(VALIDATION_ERROR),\n    price: Yup.string().matches(carRegExp.onlyPositiveDigits, PRICE_VALIDATION_ERROR).required(VALIDATION_ERROR),\n    photo: Yup.string().required(VALIDATION_ERROR),\n    description: Yup.string().min(2, MIN_LENGTH_MESSAGE).max(200, MAX_LENGTH_MESSAGE).required(VALIDATION_ERROR),\n    externalColor: Yup.string().min(2, MIN_LENGTH_MESSAGE).max(100, MAX_LENGTH_MESSAGE).required(VALIDATION_ERROR),\n    colorSimpleName: Yup.string().min(2, MIN_LENGTH_MESSAGE).max(100, MAX_LENGTH_MESSAGE).required(VALIDATION_ERROR),\n    category: Yup.string().min(2, MIN_LENGTH_MESSAGE).max(100, MAX_LENGTH_MESSAGE).required(VALIDATION_ERROR)\n  });\n\n  var _useFormik = useFormik({\n    validationSchema: formSchema,\n    validateOnBlur: true,\n    initialValues: {\n      brand: car.brand || '',\n      year: car.year || '',\n      model: car.model || '',\n      photo: car.photo || '',\n      price: car.price || '',\n      engine: car.engine || '',\n      mileage: car.mileage || '',\n      description: car.description || '',\n      transmission: car.transmission || '',\n      externalColor: car.externalColor || '',\n      colorSimpleName: car.colorSimpleName || '',\n      category: car.category || ''\n    },\n    onSubmit: function onSubmit(data) {\n      if (edit) {\n        updateCarhandler({\n          id: car._id,\n          car: data\n        });\n      }\n\n      addCarhandler(data);\n    }\n  }),\n      values = _useFormik.values,\n      handleChange = _useFormik.handleChange,\n      handleSubmit = _useFormik.handleSubmit,\n      errors = _useFormik.errors,\n      touched = _useFormik.touched;\n\n  return /*#__PURE__*/_jsx(Paper, {\n    elevation: 10,\n    children: /*#__PURE__*/_jsx(\"form\", {\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsx(Paper, {\n        className: classes.paper,\n        children: /*#__PURE__*/_jsxs(Grid, {\n          container: true,\n          spacing: 2,\n          children: [/*#__PURE__*/_jsx(Grid, {\n            container: true,\n            md: 4,\n            id: \"photo div\",\n            style: {\n              padding: '1rem',\n              display: 'grid',\n              justifyItems: 'center',\n              alignItems: 'center',\n              minHeight: '10rem'\n            },\n            children: values.photo ? /*#__PURE__*/_jsx(\"img\", {\n              alt: \"car\",\n              style: {\n                maxWidth: '100%',\n                height: 'auto'\n              },\n              src: values.photo\n            }) : /*#__PURE__*/_jsx(Image, {\n              style: {\n                width: '100%',\n                height: '100%'\n              }\n            })\n          }), /*#__PURE__*/_jsx(Grid, {\n            container: true,\n            md: 8,\n            children: /*#__PURE__*/_jsxs(Grid, {\n              container: true,\n              md: 12,\n              style: {\n                padding: '1rem'\n              },\n              children: [/*#__PURE__*/_jsx(Grid, {\n                sm: 12,\n                md: 12,\n                style: {\n                  padding: '1rem 1rem 0'\n                },\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: classes.inputMargin,\n                  children: [/*#__PURE__*/_jsx(TextField, {\n                    error: touched.photo && errors.photo,\n                    name: \"photo\",\n                    label: \"Photo\",\n                    placeholder: \"Photo\",\n                    size: \"small\",\n                    fullWidth: true,\n                    value: values.photo,\n                    variant: \"outlined\",\n                    onChange: handleChange\n                  }), touched.photo && errors.photo && /*#__PURE__*/_jsx(\"div\", {\n                    className: classes.inputError,\n                    children: errors.photo\n                  })]\n                })\n              }), /*#__PURE__*/_jsxs(Grid, {\n                item: true,\n                style: {\n                  padding: '0 1rem'\n                },\n                xs: 12,\n                sm: 12,\n                md: 6,\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: classes.inputMargin,\n                  children: [/*#__PURE__*/_jsx(TextField, {\n                    \"aria-label\": \"enter car brand\",\n                    name: \"brand\",\n                    error: touched.brand && errors.brand,\n                    placeholder: \"Brand\",\n                    label: \"Brand\",\n                    size: \"small\",\n                    fullWidth: true,\n                    variant: \"outlined\",\n                    onChange: handleChange,\n                    value: values.brand\n                  }), touched.brand && errors.brand && /*#__PURE__*/_jsx(\"div\", {\n                    className: classes.inputError,\n                    children: errors.brand\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: classes.inputMargin,\n                  children: [/*#__PURE__*/_jsx(TextField, {\n                    name: \"model\",\n                    error: touched.model && errors.model,\n                    placeholder: \"Model\",\n                    label: \"Model\",\n                    size: \"small\",\n                    fullWidth: true,\n                    variant: \"outlined\",\n                    onChange: handleChange,\n                    value: values.model\n                  }), touched.model && errors.model && /*#__PURE__*/_jsx(\"div\", {\n                    className: classes.inputError,\n                    children: errors.model\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: classes.inputMargin,\n                  children: [/*#__PURE__*/_jsx(TextField, {\n                    name: \"price\",\n                    error: touched.price && errors.price,\n                    placeholder: \"Price\",\n                    label: \"Price\",\n                    size: \"small\",\n                    fullWidth: true,\n                    variant: \"outlined\",\n                    onChange: handleChange,\n                    value: values.price\n                  }), touched.price && errors.price && /*#__PURE__*/_jsx(\"div\", {\n                    className: classes.inputError,\n                    children: errors.price\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: classes.inputMargin,\n                  children: [/*#__PURE__*/_jsx(TextField, {\n                    name: \"engine\",\n                    error: touched.engine && errors.engine,\n                    placeholder: \"Engine\",\n                    label: \"Engine\",\n                    size: \"small\",\n                    fullWidth: true,\n                    variant: \"outlined\",\n                    onChange: handleChange,\n                    value: values.engine\n                  }), touched.engine && errors.engine && /*#__PURE__*/_jsx(\"div\", {\n                    className: classes.inputError,\n                    children: errors.engine\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: classes.inputMargin,\n                  children: [/*#__PURE__*/_jsx(TextField, {\n                    name: \"externalColor\",\n                    error: touched.externalColor && errors.externalColor,\n                    placeholder: \"External color\",\n                    label: \"External color\",\n                    size: \"small\",\n                    fullWidth: true,\n                    variant: \"outlined\",\n                    onChange: handleChange,\n                    value: values.externalColor\n                  }), touched.externalColor && errors.externalColor && /*#__PURE__*/_jsx(\"div\", {\n                    className: classes.inputError,\n                    children: errors.externalColor\n                  })]\n                })]\n              }), /*#__PURE__*/_jsxs(Grid, {\n                item: true,\n                style: {\n                  padding: '0 1rem'\n                },\n                xs: 12,\n                sm: 12,\n                md: 6,\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: classes.inputMargin,\n                  children: [/*#__PURE__*/_jsx(TextField, {\n                    name: \"mileage\",\n                    error: touched.mileage && errors.mileage,\n                    placeholder: \"Mileage\",\n                    label: \"Mileage\",\n                    size: \"small\",\n                    fullWidth: true,\n                    variant: \"outlined\",\n                    onChange: handleChange,\n                    value: values.mileage\n                  }), touched.mileage && errors.mileage && /*#__PURE__*/_jsx(\"div\", {\n                    className: classes.inputError,\n                    children: errors.mileage\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: classes.inputMargin,\n                  children: [/*#__PURE__*/_jsxs(TextField, {\n                    name: \"colorSimpleName\",\n                    error: touched.colorSimpleName && errors.colorSimpleName,\n                    placeholder: \"Simple color\",\n                    select: true,\n                    label: \"Simple color\",\n                    SelectProps: {\n                      \"native\": true\n                    },\n                    size: \"small\",\n                    fullWidth: true,\n                    variant: \"outlined\",\n                    onChange: handleChange,\n                    value: values.colorSimpleName,\n                    children: [/*#__PURE__*/_jsx(\"option\", {}), mappedColors]\n                  }), touched.colorSimpleName && errors.colorSimpleName && /*#__PURE__*/_jsx(\"div\", {\n                    className: classes.inputError,\n                    children: errors.colorSimpleName\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: classes.inputMargin,\n                  children: [/*#__PURE__*/_jsxs(TextField, {\n                    name: \"year\",\n                    error: touched.year && errors.year,\n                    placeholder: \"choose a year\",\n                    label: \"year\",\n                    select: true,\n                    SelectProps: {\n                      \"native\": true\n                    },\n                    size: \"small\",\n                    fullWidth: true,\n                    variant: \"outlined\",\n                    onChange: handleChange,\n                    value: values.year,\n                    children: [/*#__PURE__*/_jsx(\"option\", {}), mappedYears]\n                  }), touched.year && errors.year && /*#__PURE__*/_jsx(\"div\", {\n                    className: classes.inputError,\n                    children: errors.year\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: classes.inputMargin,\n                  children: [/*#__PURE__*/_jsxs(TextField, {\n                    name: \"transmission\",\n                    error: touched.transmission && errors.transmission,\n                    placeholder: \"choose a transmission\",\n                    label: \"transmission\",\n                    select: true,\n                    SelectProps: {\n                      \"native\": true\n                    },\n                    size: \"small\",\n                    fullWidth: true,\n                    variant: \"outlined\",\n                    onChange: handleChange,\n                    value: values.transmission,\n                    children: [/*#__PURE__*/_jsx(\"option\", {}), /*#__PURE__*/_jsx(\"option\", {\n                      children: \"Automatic\"\n                    }), /*#__PURE__*/_jsx(\"option\", {\n                      children: \"Manual\"\n                    }), /*#__PURE__*/_jsx(\"option\", {\n                      children: \"Steptronic\"\n                    })]\n                  }), touched.transmission && errors.transmission && /*#__PURE__*/_jsx(\"div\", {\n                    className: classes.inputError,\n                    children: errors.transmission\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: classes.inputMargin,\n                  children: [/*#__PURE__*/_jsxs(TextField, {\n                    name: \"category\",\n                    error: touched.category && errors.category,\n                    placeholder: \"choose a category\",\n                    label: \"category\",\n                    select: true,\n                    SelectProps: {\n                      \"native\": true\n                    },\n                    size: \"small\",\n                    fullWidth: true,\n                    variant: \"outlined\",\n                    onChange: handleChange,\n                    value: values.category,\n                    children: [/*#__PURE__*/_jsx(\"option\", {}), mappedCategories]\n                  }), touched.category && errors.category && /*#__PURE__*/_jsx(\"div\", {\n                    className: classes.inputError,\n                    children: errors.category\n                  })]\n                })]\n              }), /*#__PURE__*/_jsx(Grid, {\n                xs: 12,\n                sm: 12,\n                md: 12,\n                item: true,\n                style: {\n                  padding: '0 1rem'\n                },\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  style: {\n                    minHeight: '70px'\n                  },\n                  children: [/*#__PURE__*/_jsx(TextField, {\n                    name: \"description\",\n                    error: touched.description && errors.description,\n                    multiline: true,\n                    placeholder: \"description\",\n                    label: \"description\",\n                    size: \"small\",\n                    fullWidth: true,\n                    variant: \"outlined\",\n                    value: values.description,\n                    onChange: handleChange\n                  }), touched.description && errors.description && /*#__PURE__*/_jsx(\"div\", {\n                    className: classes.inputError,\n                    children: errors.description\n                  })]\n                })\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: classes.buttonDiv,\n                children: [/*#__PURE__*/_jsx(Link, {\n                  href: \"/\",\n                  children: /*#__PURE__*/_jsx(Button, {\n                    type: \"button\",\n                    variant: \"outlined\",\n                    color: \"secondary\",\n                    children: \"Back to main\"\n                  })\n                }), /*#__PURE__*/_jsx(Button, {\n                  type: \"submit\",\n                  variant: \"contained\",\n                  color: \"primary\",\n                  children: \"Create car\"\n                })]\n              })]\n            })\n          })]\n        })\n      })\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}