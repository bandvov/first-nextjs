{"ast":null,"code":"import { Machine } from 'xstate';\nconst defaultFilter = {\n  brand: '',\n  color: '',\n  minYear: '',\n  maxYear: '',\n  minPrice: '',\n  maxPrice: '',\n  searchText: ''\n};\nexport const carMachine = Machine({\n  id: 'filter',\n  initial: 'initial',\n  context: {\n    filter: defaultFilter,\n    open: false,\n    text: '',\n    handler: () => {},\n    push: () => {},\n    id: '',\n    loading: true,\n    currentPage: 1\n  },\n  states: {\n    initial: {\n      on: {\n        SHOW: {\n          target: 'show',\n          actions: ['showDialog']\n        },\n        ADD_BRAND: {\n          target: 'initial',\n          actions: ['addBrandToStore']\n        },\n        ADD_COLOR: {\n          target: 'initial',\n          actions: ['addColorToStore']\n        },\n        ADD_MINYEAR: {\n          target: 'initial',\n          actions: ['addMinYearToStore']\n        },\n        ADD_MAXYEAR: {\n          target: 'initial',\n          actions: ['addMaxYearToStore']\n        },\n        ADD_MINPRICE: {\n          target: 'initial',\n          actions: ['addMinPriceToStore']\n        },\n        ADD_MAXPRICE: {\n          target: 'initial',\n          actions: ['addMaxPriceToStore']\n        },\n        ADD_SEARCH_TEXT: {\n          target: 'initial',\n          actions: ['addSearchText']\n        },\n        CLEAR_FILTER: {\n          target: 'initial',\n          actions: ['clearFilter']\n        },\n        SET_FILTERS: {\n          target: 'initial',\n          actions: ['setAllFilters', 'setCurrentPage']\n        },\n        SET_LOADING: {\n          target: 'initial',\n          actions: ['setLoading']\n        },\n        SET_CURRENT_PAGE: {\n          target: 'initial',\n          actions: ['setCurrentPage']\n        }\n      }\n    },\n    show: {\n      on: {\n        DELETE: {\n          target: 'initial',\n          actions: ['runHandler', 'hideDialog', 'clearData', 'push']\n        },\n        CANCEL: {\n          target: 'initial',\n          actions: ['hideDialog', 'clearData']\n        }\n      }\n    }\n  }\n}, {\n  actions: {\n    showDialog: (ctx, evt) => {\n      ctx.text = evt.text;\n      ctx.open = true;\n      ctx.handler = evt.handler;\n      ctx.push = evt.push;\n    },\n    hideDialog: ctx => {\n      ctx.open = false;\n    },\n    runHandler: ctx => {\n      ctx.handler();\n    },\n    clearData: ctx => {\n      ctx.text = '';\n\n      ctx.handler = () => {};\n    },\n    clearFilter: ctx => {\n      ctx.filter = {\n        brand: '',\n        color: '',\n        maxPrice: '',\n        maxYear: '',\n        minPrice: '',\n        minYear: '',\n        searchText: ''\n      };\n      ctx.currentPage = 1;\n    },\n    push: ctx => ctx.push(),\n    addBrandToStore: (ctx, evt) => ctx.filter.brand = evt.brand,\n    addColorToStore: (ctx, evt) => ctx.filter.color = evt.color,\n    addYearToStore: (ctx, evt) => ctx.filter.year = evt.year,\n    addMinYearToStore: (ctx, evt) => ctx.filter.minYear = evt.minYear,\n    addMaxYearToStore: (ctx, evt) => ctx.filter.maxYear = evt.maxYear,\n    addMinPriceToStore: (ctx, evt) => ctx.filter.minPrice = evt.minPrice,\n    addMaxPriceToStore: (ctx, evt) => ctx.filter.maxPrice = evt.maxPrice,\n    addSearchText: (ctx, evt) => ctx.filter.searchText = evt.searchText,\n    setAllFilters: (ctx, evt) => {\n      ctx.filter = evt.filter;\n      ctx.currentPage = evt.currentPage;\n    },\n    setLoading: (ctx, evt) => ctx.loading = evt.loading,\n    setCurrentPage: (ctx, evt) => ctx.currentPage = evt.currentPage\n  }\n});","map":null,"metadata":{},"sourceType":"module"}